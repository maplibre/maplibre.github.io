<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="map[]"><meta name=keywords content><meta name=description content><meta name=theme-color content="#fff"><meta property="og:image" content="/img/share-image.png"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="512"><meta property="og:image:alt" content="MapLibre"><meta property="og:title" content="maplibre-rs monthly"><meta property="og:description" content><meta property="og:url" content="https://maplibre.org/news/2022-09-24-maplibre-rs-monthly/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@maplibre"><meta name=twitter:creator content="@maplibre"><meta name=twitter:title content="maplibre-rs monthly"><meta name=twitter:description content><meta name=twitter:image:src content="/img/share-image.png"><meta name=twitter:image:alt content="MapLibre"><link rel=stylesheet href=/style.min.87be23d68ceac14f5ab371ad187a4b9e0b5fa9d15e2fc8e0c88bfa37bbcc2880.css><link rel=stylesheet href=/mapbox-gl.5d216becb39cb8484b4c28f1103286616af26e7c6f9846ead6f55e6f368e7464.css><script type=text/javascript src=/main.f6b38f8cf56bdcb46ba569d3b5dfa8d46f7a42d9d4ccf261c1b92a0394a20a2a.js></script><title>MapLibre - maplibre-rs monthly</title></head><body><nav class="navbar navbar-expand-lg navbar-dark fixed-top
bg-navbar"><div class=container><a class=navbar-brand href=/ aria-label=MapLibre><svg aria-hidden="true" width="141" height="30" viewBox="0 0 141 30" xmlns="http://www.w3.org/2000/svg"><use href="/img/maplibre-logo.svg#maplibre-logo"/></svg></a><div class=d-flex><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavAltMarkup aria-controls=navbarNavAltMarkup aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button>
<a class="nav-link py-1 py-lg-0 d-flex align-items-center d-lg-none text-white" href=https://github.com/MapLibre aria-label="MapLibre organization on Github"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><use href="/img/github.svg#github"/></svg></a></div><div class="collapse navbar-collapse justify-content-end" id=navbarNavAltMarkup><div class=navbar-nav><li><a class=nav-link href=/about/>About</a></li><li><a class=nav-link href=/jobs/>Jobs</a></li><li><a class=nav-link href=/roadmap/>Roadmap</a></li><li><a class=nav-link href=/sponsors/>Sponsors</a></li><li><a class=nav-link href=/news/>News</a></li><li><a class=nav-link href=/projects/>Projects</a></li><li><a class=nav-link href=/community/>Community</a></li><a class="nav-link d-flex flex-row justify-content-between" href=https://github.com/sponsors/maplibre><span aria-hidden=true class=me-1>‚ô°</span> Donate</a></div></div><a class="nav-link py-1 py-lg-0 d-none align-items-center d-lg-flex text-white" href=https://github.com/MapLibre aria-label="MapLibre organization on Github"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><use href="/img/github.svg#github"/></svg></a></div></nav><div class="container-fluid px-0 mb-6"><div class="row mx-0 bg-title text-center align-items-center"><h1 class="text-white pt-6"><span class=text-secondary>maplibre-rs monthly</span> MapLibre</h1></div></div><div class=container><div class=row><div class=post-meta-date><time datetime=" 2022-09-24">Sep 24, 2022</time>
<span>¬∑</span>
<span>3 minutes read</span></div><div>Categories:
<span class="badge bg-light"><a href=https://maplibre.org/categories/maplibre-rs/>maplibre-rs</a></span></div><div>Authors:
<span><span class="badge bg-light"><a href=https://maplibre.org/authors/maxammann/>Max Ammann</a></span></span></div></div><div class="row mt-4"><div><p><a href=https://github.com/maplibre/maplibre-rs target=_blank rel=noopener>maplibre-rs</a>
is an upcoming and cross-platform vector map renderer written in Rust. If you want to get in touch with the developers, visit the <a href=https://matrix.to/#/#mapr:matrix.org target=_blank rel=noopener>#maplibre:matrix.org</a>
chat or join the MapLibre (#maplibre and #maplibre-rs) community within the OpenStreetMap Slack. You can get an invitation <a href=https://slack.openstreetmap.us target=_blank rel=noopener>here</a>
.</p><h2 id=-news>üì∞ News <a class=heading-link href=#-news></a></h2><p>It has been an exciting summer - FOSS4G happened and a <a href=https://maplibre.org/news/2022-08-24-maplibre-rs-paper/ target=_blank rel=noopener>paper</a>
about maplibre-rs was published. The whole MapLibre team was able to meet! We met our sponsors and other awesome people from the open-source community.</p><p>And because a picture is worth a thousand words:</p><figure><img class="w-50 p-3" src=/news/2022-09-24-maplibre-rs-monthly/collage_hue932f6db28f06d1f90ab005648c62aa1_5428699_1000x0_resize_q75_h2_box.webp alt="Our community" width=1000px><figcaption>Our community</figcaption></figure><p>Behind the scenes, I was working on providing an alternative multi-threading implementation for the web platform. Because atomics are only supported by <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer target=_blank rel=noopener>enabling specific HTTP headers</a>
, we really need a more portable implementation which does not rely on these atomics. Instead of doing real multithreading in the browser, we want to do multiprocessing through WebWorkers. I designed an interface which should work well for most data-processing needs. The interface is called <code>AsyncProcedureCall</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Rust data-lang=Rust><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#007020>#[derive(Clone)]</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>enum</span> <span style=color:#0e84b5;font-weight:700>Message</span><span style=color:#666>&lt;</span>T: <span style=color:#0e84b5;font-weight:700>Transferables</span><span style=color:#666>&gt;</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bbb>    </span>TileTessellated(T::TileTessellated),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bbb>    </span>UnavailableLayer(T::UnavailableLayer),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bbb>    </span>TessellatedLayer(T::TessellatedLayer),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bbb></span><span style=color:#007020>#[derive(Clone, Serialize, Deserialize)]</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>enum</span> <span style=color:#0e84b5;font-weight:700>Input</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bbb>    </span>TileRequest(TileRequest),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>type</span> <span style=color:#0e84b5;font-weight:700>AsyncProcedure</span><span style=color:#666>&lt;</span>C<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>fn</span>(input: <span style=color:#0e84b5;font-weight:700>Input</span>,<span style=color:#bbb> </span>context: <span style=color:#0e84b5;font-weight:700>C</span>)<span style=color:#bbb> </span>-&gt; <span style=color:#0e84b5;font-weight:700>AsyncProcedureFuture</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>trait</span><span style=color:#bbb> </span>AsyncProcedureCall<span style=color:#666>&lt;</span>T: <span style=color:#0e84b5;font-weight:700>Transferables</span>,<span style=color:#bbb> </span>HC: <span style=color:#0e84b5;font-weight:700>HttpClient</span><span style=color:#666>&gt;</span>: <span style=color:#666>&#39;</span><span style=color:#007020>static</span> {<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>type</span> <span style=color:#0e84b5;font-weight:700>Context</span>: <span style=color:#0e84b5;font-weight:700>Context</span><span style=color:#666>&lt;</span>T,<span style=color:#bbb> </span>HC<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb> </span><span style=color:#007020>Send</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>fn</span> <span style=color:#06287e>receive</span>(<span style=color:#666>&amp;</span><span style=color:#007020;font-weight:700>mut</span><span style=color:#bbb> </span>self)<span style=color:#bbb> </span>-&gt; <span style=color:#007020>Option</span><span style=color:#666>&lt;</span>Message<span style=color:#666>&lt;</span>T<span style=color:#666>&gt;&gt;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>fn</span> <span style=color:#06287e>schedule</span>(<span style=color:#666>&amp;</span>self,<span style=color:#bbb> </span>input: <span style=color:#0e84b5;font-weight:700>Input</span>,<span style=color:#bbb> </span>procedure: <span style=color:#0e84b5;font-weight:700>AsyncProcedure</span><span style=color:#666>&lt;</span>Self::Context<span style=color:#666>&gt;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>Instead of relying on mutexes and MPSC channels, the implementation of this <code>APC</code> for the web relies on WebWorkers and sending <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer target=_blank rel=noopener>ArrayBuffers</a>
.</p><p>I&rsquo;m working on this in a rather large <a href=https://github.com/maplibre/maplibre-rs/pull/174 target=_blank rel=noopener>#174</a>
. As not much else is going on in the project, merging probably won&rsquo;t cause issues.</p><h2 id=-housekeeping>üè† Housekeeping <a class=heading-link href=#-housekeeping></a></h2><p>The following will summarizes what happened last week on GitHub.</p><h3 id=-merged-pull-requests>üéÅ Merged Pull Requests <a class=heading-link href=#-merged-pull-requests></a></h3><ul><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/169 target=_blank rel=noopener>#169</a>
Add watch functionality for web by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>We have now build tools for the web which automatically reloads the demo in the browser for changes in Rust.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/167 target=_blank rel=noopener>#167</a>
Add citation instructions by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>The maplibre-rs is now officially citable in others scientific work!</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/160 target=_blank rel=noopener>#160</a>
Add CLI to demo by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>A CLI allows users now to configure the demo on Linux, Windows and macOS.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/154 target=_blank rel=noopener>#154</a>
Run scheduled builds by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>We regularly build our main branch now, to detect breaking dependencies.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/80 target=_blank rel=noopener>#80</a>
Refactor WebWorker pool by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>This is the start of a major refactor for async tasks on the web.</p></li></ul><h3 id=-new-issues>üéÅ New Issues <a class=heading-link href=#-new-issues></a></h3><ul><li><p><a href=https://github.com/maplibre/maplibre-rs/issues/166 target=_blank rel=noopener>#166</a>
ReferenceError: Can&rsquo;t find variable: Worker by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>This bug blocks us currently on Safari (iOS/macOS). I&rsquo;m actively working right now to provide a build which does not use atomics.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/issues/164 target=_blank rel=noopener>#164</a>
INVALID_ENUM: framebuffertexture2d invalid attachment by <a href=https://github.com/maxammann target=_blank rel=noopener>@maxammann</a><br>This is a bug in older versions in Safari. With the release of iOS 16 and Safari 16 this is fixed now.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/issues/161 target=_blank rel=noopener>#161</a>
Limit the maximum and minimum zoom level by <a href=https://github.com/hanchao target=_blank rel=noopener>@hanchao</a><br>We got a great bug report! It seems like people are experimenting with maplibre-rs in the wild!</p></li></ul><h3 id=-current-discussions>üßµ Current Discussions <a class=heading-link href=#-current-discussions></a></h3><p>None.</p><h3 id=-contributors>üëã Contributors <a class=heading-link href=#-contributors></a></h3><ul><li><a href=https://github.com/karisair target=_blank rel=noopener>@karisair</a></li><li><a href=https://github.com/birkskyum target=_blank rel=noopener>@birkskyum</a></li><li><a href=https://github.com/BezPowell target=_blank rel=noopener>@BezPowell</a></li><li><a href=https://github.com/Quillasp target=_blank rel=noopener>@Quillasp</a>
- Thanks for working on raster tile support!</li></ul></div></div></div><footer class=mt-auto><div class="container pb-4 pt-6"><a href=/ aria-label=MapLibre><svg aria-hidden="true" width="141" height="30" viewBox="0 0 141 30" xmlns="http://www.w3.org/2000/svg"><use href="/img/maplibre-logo-dark.svg#maplibre"/></svg></a></div><div class="container border-top border-gray"><div class="row py-3"><div class=col-sm-4><div class=nav><li><a class="nav-link text-black-50" href=/>Home</a></li><li><a class="nav-link text-black-50" href=/jobs/>Jobs</a></li><li><a class="nav-link text-black-50" href=/sponsors/>Sponsors</a></li><li><a class="nav-link text-black-50" href=/projects/>Projects</a></li></div></div><div class=col-sm-4><div class="d-flex justify-content-center text-black-50">Creative Commons Zero v1.0 Universal</div></div><div class="col-sm-2 flex"><div class="text-black-50 d-flex justify-content-center"><a class=text-black-50 href=https://github.com/maplibre/maplibre.github.io>GitHub</a>
@
<a class=text-black-50 href=#ZgotmplZ/commit/ac855c01f0fbf3c8dfe50b2a38e1bf9fd050e83b>ac855c0</a></div></div><div class=col-sm-2><div class="nav justify-content-end"><a class="nav-link text-black-50" href=https://twitter.com/maplibre aria-label="MapLibre on Twitter"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><use href="/img/icon/twt.svg#twt"/></svg></a></div></div></div></div></footer></body></html>